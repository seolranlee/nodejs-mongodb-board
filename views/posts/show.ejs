<!doctype html>
<html>
<head>
    <% include ../partials/head %>
</head>
<body>
    <header>
        <% include ../partials/header %>
    </header>
    <div class="posts">
        <% include parials/top %>

        <!--main start-->

        <!-- views/posts/show.ejs -->
        <div class="show">
            <h3><%= post.title %></h3>
            <div class="time">Created at <br>
                <%= post.createdAt.toLocaleDateString() %><br>
                <%= post.createdAt.toLocaleTimeString() %>
            </div>
            <% if(post.updatedAt){%>
                <div class="time">Updated at <br>
                    <%= post.updatedAt.toLocaleDateString() %><br>
                    <%= post.updatedAt.toLocaleTimeString() %>
                </div>
            <%}%>
            <p class="body"><%= post.body %></p>
            <div class="float_right">Author: <%= post.author.nickname %></div>
            <% if(user && user.equals(post.author._id)) { %>
            <div class="tools">
                <a href="/posts/<%=post._id%>/edit"><button>Edit</button></a>
                <!--Delete button here-->
                <form class="btn_delete" action="/posts/<%= post._id%>?_method=delete" method="post">
                    <!--form method는 post이지만 action에 ?_method=delete이 추가되어 신호가 덮어쓰기(override)가 된다-->
                    <button type="submit">Delete</button>
                </form>
            </div>
            <% } %>
            <a href="/posts"><button>Back</button></a>
        </div>

        <!--main end-->
    </div>
    <!--posts end-->
    <footer>
        <% include ../partials/footer %>
    </footer>
</body>
</html>